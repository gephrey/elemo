(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d9a0b89a"],{"0418":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLeft,expression:"isLeft"}],staticClass:"header-button is-left"},[n("i",{staticClass:"fa fa-chevron-left"}),n("button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]),n("h1",{staticClass:"header-title"},[t._v(t._s(t.title))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.btn_icon,expression:"btn_icon"}],staticClass:"header-button is-right"},[n("button",{on:{click:function(e){return t.$emit("rightClick")}}},[n("i",{class:"fa fa-"+t.btn_icon})])])])},a=[],o={name:"Hader",props:{title:String,isLeft:{type:Boolean,default:!1},btn_icon:String}},s=o,r=(n("2658"),n("2877")),c=Object(r["a"])(s,i,a,!1,null,"27459a2c",null);e["a"]=c.exports},"16c2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pay"},[n("Header",{attrs:{title:"在线支付"}}),t.orderInfo?n("div",{staticClass:"main"},[n("div",{staticClass:"tip"},[n("p",{staticClass:"countdown-title"},[t._v("支付剩余时间")]),n("h3",{staticClass:"countdown-text"},[t._v(t._s(t.countDown))])]),n("section",{staticClass:"home"},[n("ul",{staticClass:"list info-list"},[n("li",[n("span",{staticClass:"order-name"},[t._v(t._s(t.orderInfo.shopInfo.name))]),n("span",{staticClass:"text-highlight"},[t._v("¥"+t._s(t.totalPrice))])])]),n("div",{staticClass:"title"},[t._v("在线支付")]),t._m(0)]),n("button",{staticClass:"btn-submit",attrs:{disabled:t.timeOut},on:{click:t.pay}},[t._v("确认支付")])]):t._e()],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"list payment-list"},[i("li",{staticClass:"payment-list-item"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:n("68de"),alt:""}}),i("span",[t._v("微信")])]),i("i",{staticClass:"fa fa-check-circle selected"})])])}],o=n("f499"),s=n.n(o),r=(n("6b54"),n("cadf"),n("551c"),n("f751"),n("097d"),n("0418")),c=n("5118"),u={name:"Pay",data:function(){return{countDown:"00:15:00",timer:null,timeOut:!1}},beforeRouteEnter:function(t,e,n){n(function(t){t.countTimeDown()})},computed:{orderInfo:function(){return this.$store.getters.orderInfo},totalPrice:function(){return this.$store.getters.totalPrice},userInfo:function(){return this.$store.getters.userInfo},remarkInfo:function(){return this.$store.getters.remarkInfo}},methods:{countTimeDown:function(){var t=this,e=14,n=59;this.timer=Object(c["setInterval"])(function(){if(n--,"00"==n&&"00"==e)return t.countDown="订单已超时",Object(c["clearInterval"])(t.timer),void(t.timeOut=!0);"00"==n&&(n=59,e--,e<10&&(e="0"+e)),n<10&&(n="0"+n),t.countDown="00:"+e+":"+n},1e3)},pay:function(){var t=this,e={body:"米修在线",out_trade_no:(new Date).getTime().toString(),total_fee:1};alert("进入到pay方法中"),fetch("http://www.thenewstep.cn/wxzf/example/jsapi.php",{method:"POST",headers:{"Content-type":"application/json"},body:s()(e)}).then(function(t){return t.json()}).then(function(e){t.onBridgeReady(e)}).catch(function(t){alert("请求失败")})},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.addOrder()})},addOrder:function(){var t=this,e={orderInfo:this.orderInfo,userInfo:this.userInfo,totalPrice:this.totalPrice,remarkInfo:this.remarkInfo};this.$axios.post("/api/user/add_order/".concat(localStorage.ele_login),e).then(function(e){t.$router.push("/order")})}},components:{Header:r["a"]}},l=u,f=(n("f7da"),n("2877")),d=Object(f["a"])(l,i,a,!1,null,"c37dd6be",null);e["default"]=d.exports},2658:function(t,e,n){"use strict";var i=n("50f8"),a=n.n(i);a.a},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"50f8":function(t,e,n){},5118:function(t,e,n){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(a.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(a.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},6017:function(t,e,n){(function(t,e){(function(t,n){"use strict";if(!t.setImmediate){var i,a=1,o={},s=!1,r=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?m():p()?h():t.MessageChannel?g():r&&"onreadystatechange"in r.createElement("script")?v():_(),c.setImmediate=u,c.clearImmediate=l}function u(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return o[a]=s,i(a),a++}function l(t){delete o[t]}function f(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i);break}}function d(t){if(s)setTimeout(d,0,t);else{var e=o[t];if(e){s=!0;try{f(e)}finally{l(t),s=!1}}}}function m(){i=function(t){e.nextTick(function(){d(t)})}}function p(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function h(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&d(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),i=function(n){t.postMessage(e+n,"*")}}function g(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;d(e)},i=function(e){t.port2.postMessage(e)}}function v(){var t=r.documentElement;i=function(e){var n=r.createElement("script");n.onreadystatechange=function(){d(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function _(){i=function(t){setTimeout(d,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n("c8ba"),n("4362"))},"68de":function(t,e,n){t.exports=n.p+"img/wechart.0055285e.jpg"},"6b54":function(t,e,n){"use strict";n("3846");var i=n("cb7c"),a=n("0bfb"),o=n("9e1e"),s="toString",r=/./[s],c=function(t){n("2aba")(RegExp.prototype,s,t,!0)};n("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?a.call(t):void 0)}):r.name!=s&&c(function(){return r.call(this)})},"7ca9":function(t,e,n){},a21f:function(t,e,n){var i=n("584a"),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},f499:function(t,e,n){t.exports=n("a21f")},f7da:function(t,e,n){"use strict";var i=n("7ca9"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-d9a0b89a.0607fdfd.js.map